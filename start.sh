#!/bin/bash

echo "                                                   "
echo "==================================================="
echo "================= TIW 1 - IS ======================"
echo "                 ------------                      "
echo "==================================================="
echo "======= Alper EKMEKCI & Florian PALABOST =========="
echo "       ----------------------------------          "
echo "==================================================="
echo "                                                   "

echo "                                                   "
echo "==================================================="
echo "============== Installing and Running ============="
echo "              ------------------------             "
echo "==================================================="
echo "                                                   "

echo "                                                   "
echo "==================================================="
echo "================= Les conteneurs =================="
echo "==================================================="
echo "                                                   "
sudo docker ps -a;
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "=================== Les images ===================="
echo "==================================================="
sudo docker images;
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "=============== Arret des conteneurs =============="
echo "==================================================="
sudo docker stop $(docker ps -a -q);
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "============ Suppression des conteneurs ==========="
echo "==================================================="
sudo docker rm $(docker ps -a -q);
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "=============== docker-compose down ==============="
echo "==================================================="
sudo docker-compose down --rmi all;
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "================ mvn clean install ================"
echo "==================================================="
cd serveur;
mvn clean install;
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "============ Copie des fichiers .json ============="
echo "==================================================="
cd metier-base/MonCinema;
cp *.json ../../tp3/target/;
echo "==================================================="

echo "                                                   "
echo "==================================================="
echo "================ docker-compose up ================"
echo "==================================================="
cd ././../tiw1-is-2018/;
sudo docker-compose up --build;
